name: DCVAE-Azure
channels:
  - conda-forge
dependencies:
  # Basics
  - python=3.9 # Later versions don't work with Tensorflow 2.9.1
  - libwebp>=1.3.2 # Earlier versions have a security vulnerability
  - iris=3.8 # Later versions don't work with python 3.9
  - pandas=2.2
  - cmocean=4.0
  - parallel
  - zarr=2.13
  # Get data from ERA5
  # You'll need to register, see https://cds.climate.copernicus.eu/api-how-to
  - cdsapi=0.6
  #- nco=5.1 # ncks for cleaning up the CDS netCDF files
  # ML model building and diagnostics
  # If you don't have a GPU, tensorflow-eigen might be faster
  - cuda
  - cudnn
   # Optional, code formatter
  - black
  # Optional - documentation generator
  - sphinx=7.*
  # Optional - needed only for monitoring jobs
  - tmux

  # Azure
  - azure-ai-ml = 1.19
  - azure-identity = 1.17
  - azure-storage-file-datalake = 12.16

  # Some packages are only available via pip
  - pip
  - pip:
      - tensorflow
      # For bilinear interpolation
      - tensorflow-addons
      # For input space search
      - tensorflow-probability
      # For efficient data IO
      - tensorstore

# Tell python to look for modules in the root directory of the project
# (A hack, needs to be edited for every installation, but makes code
#  management much easier.)
# Replace with the path to your project directory root. 

variables:
  PYTHONPATH: /home/users/philip.brohan/Projects/DCVAE_Climate

# Also the Azure ML subscription, workspace and resource group
  AZML_SUBSCRIPTION_ID: ef7c87c5-ea27-4e06-9fad-ac06dc6b3fd1
  AZML_WORKSPACE_NAME: ai4climate-scratch
  AZML_RESOURCE_GROUP: rg-AI4-Climate 
